# **Техническое задание: Корпоративный сервис сокращения ссылок**

## **1. Введение**
Сервис предназначен для внутреннего использования в компании и позволяет сотрудникам:  
- Создавать короткие ссылки (случайные или с заданным псевдонимом).  
- Отслеживать переходы по ссылкам.  
- Анализировать статистику по пользователям (геолокация, устройство, браузер).  
- Получать сводные отчеты по всем ссылкам.  

Стек технологий:  
- **Backend**: Python, Django (DRF или Django Ninja для API)  
- **Database**: PostgreSQL / SQLite (для разработки)  
- **Frontend** (опционально): Django Templates / React (если требуется отдельный интерфейс)  

---  

## **2. Функциональные требования**

### **2.1. Основной функционал**  
#### **2.1.1. Создание короткой ссылки**  
- Генерация случайной короткой ссылки (например, `corp.ly/abc123`).  
- Возможность задать свой псевдоним (например, `corp.ly/report2024`).  
- Валидация URL (проверка на корректность).  
- Ограничение доступа (только для авторизованных пользователей).  

#### **2.1.2. Переход по ссылке**
- Перенаправление на исходный URL.  
- Запись данных о переходе:  
  - IP-адрес  
  - User-Agent (браузер, ОС, устройство)  
  - Время перехода  
  - Референр (если есть)  

#### **2.1.3. Статистика и аналитика**
- **По одной ссылке**:  
  - Общее количество переходов.  
  - График переходов по дням/неделям.  
  - География переходов (по IP).  
  - Устройства и браузеры.  
- **Общая статистика**:  
  - Топ ссылок по количеству переходов.  
  - Фильтрация по дате создания/активности.  
  - Экспорт данных в CSV/JSON.  

### **2.2. Дополнительный функционал (по аналогии с популярными сервисами)**
- **Временные ссылки** (срок действия).  
- **QR-код для короткой ссылки**.  
- **Парольная защита ссылок**.  
- **Лимиты на создание ссылок** (например, не более 100 в день).  
- **Группировка ссылок по тегам/категориям**.  
- **API для интеграции** (REST или GraphQL).  
- **Кастомный домен** (если сервис корпоративный, можно задать `links.company.com`).  
- **Webhook-уведомления** о переходе.  

---  

## **3. Технические требования**

### **3.1. Backend**
- **Django** (MVC-архитектура).  
- **Django Ninja / DRF** для API.  
- **Аутентификация** (JWT / Session-based).  
- **Кэширование** (Redis / Memcached для частых запросов).  
- **Асинхронные задачи** (Celery для обработки статистики).  

### **3.2. База данных**
- **PostgreSQL** (или SQLite для разработки).  
- **Модели**:  
  - `User` (сотрудники).  
  - `ShortLink` (исходный URL, короткий код, создатель, дата создания).  
  - `LinkClick` (переходы: IP, user-agent, время, ссылка).  

### **3.3. Frontend (опционально)**
- Админка Django или отдельный интерфейс (React/Vue).  
- Графики (Chart.js / D3.js).  

---  

## **4. Этапы разработки**
1. **Проектирование**:  
   - Схема БД.  
   - API-эндпоинты.  
2. **Реализация MVP**:  
   - Создание и редирект ссылок.  
   - Базовая статистика.  
3. **Доработка**:  
   - Аналитика, фильтры.  
   - Доп. функции (QR, API).  
4. **Тестирование**:  
   - Юнит-тесты (pytest).  
   - Интеграционные тесты.  
5. **Деплой**:  
   - Docker-контейнеризация.  
   - Развертывание на сервере.  

---  

## **5. Критерии приемки**
- Рабочий сервис с базовым функционалом.  
- Документированный API (Swagger/OpenAPI).  
- Авторизация и ограничение доступа.  
- Сбор и отображение статистики.  
- (Опционально) Доп. функции (QR, временные ссылки).  
